!function(){"use strict";document.querySelector(".edit-popup"),document.querySelector(".add-popup"),document.querySelector(".avatar-popup");const e=document.querySelector(".profile__edit-button"),t=document.querySelector(".profile__add-button"),s=document.querySelector(".profile__image-container");class n{constructor(e,t,s){let{data:n,handleCardClick:i,handleDeleteCard:r,handleCardlike:o}=e;var a,l;l=()=>{this._element.remove(),this._element=null},(a="deleteCard")in this?Object.defineProperty(this,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):this[a]=l,this._name=n.name,this._link=n.link,this._templateSelector=t,this._handleCardClick=i,this._handleDeleteCard=r,this._handleCardlike=o,this._id=n._id,this._likes=n.likes,this._userId=s,this._ownerId=n.owner._id}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".place").cloneNode(!0)}generateCard(){this._element=this._getTemplate(),this._placeImage=this._element.querySelector(".place__image");const e=this._element.querySelector(".place__title");return this._likeCounter=this._element.querySelector(".place__likes-count"),this._likeButton=this._element.querySelector(".place__like-button"),this._placeImage.src=this._link,this._placeImage.alt="Photo of ".concat(this._name),e.textContent=this._name,this._element.querySelector(".place__likes-count").textContent=this._likes.length,this._userId!==this._ownerId&&(this._element.querySelector(".place__delete_button").style.display="none"),this.updateLikes(this._likes),this._setEventListeners(),this._element}_setEventListeners(){this._element.querySelector(".place__like-button").addEventListener("click",(()=>this._handleCardlike(this._id))),this._element.querySelector(".place__delete_button").addEventListener("click",(()=>this._handleDeleteCard(this._id))),this._placeImage.addEventListener("click",(()=>this._handleCardClick()))}updateLikes(e){this._likes=e,this._likeCounter.textContent=this._likes.length,this.isLiked()?this._likeButton.classList.add("place__like-button_active"):this._likeButton.classList.remove("place__like-button_active")}isLiked(){return this._likes.some((e=>e._id===this._userId))}}class i{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_hasInvalidInput(){return this._inputsList.every((e=>e.validity.valid))}_toggleButton(){this._hasInvalidInput()?this._enableButton():this._disableButton()}_enableButton(){this._button.disabled=!1,this._button.classList.remove(this._inactiveButtonClass)}_disableButton(){this._button.disabled=!0,this._button.classList.add(this._inactiveButtonClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){const t=this._form.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=document.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_setEventListeners(){this._inputsList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._button=this._form.querySelector(this._submitButtonSelector),this._toggleButton(),this._inputsList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButton()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>e.preventDefault())),this._setEventListeners()}resetValidation(){this._toggleButton(),this._inputsList.forEach((e=>{this._hideInputError(e)}))}}function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class o{constructor(e){r(this,"_handleEscClose",(e=>{"Escape"==e.key&&this.close()})),r(this,"_handleOverlayClick",(e=>{e.target===e.currentTarget&&this.close()})),this._popupElement=document.querySelector(e),this._submitButton=this._popupElement.querySelector(".form__button"),this._submitButton&&(this._submitButtonText=this._submitButton.textContent)}open(){this._popupElement.classList.add("popup__active"),document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("mousedown",this._handleOverlayClick)}close(){this._popupElement.classList.remove("popup__active"),document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("mousedown",this._handleOverlayClick)}handleLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitButton&&(this._submitButton.textContent=e?t:this._submitButtonText)}setEventListeners(){this._popupElement.querySelector(".popup__close-button").addEventListener("mousedown",(()=>this.close()))}}class a extends o{constructor(e,t){super(e),this._handleSubmit=t,this._inputsList=[...this._popupElement.querySelectorAll(".form__input")],this._formElement=this._popupElement.querySelector(".form")}_getInputValues(){const e={};return this._inputsList.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputsList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._getInputValues())})),super.setEventListeners()}close(){super.close(),this._formElement.reset()}}const l=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(e.statusText)}getInitialCards(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(this._checkResponse)}getUserInfo(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._checkResponse)}setUserInfo(e,t){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:e,about:t})}).then(this._checkResponse)}setUserAvatar(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e})}).then(this._checkResponse)}createCard(e){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify(e)}).then(this._checkResponse)}deleteCard(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{headers:this._headers,method:"DELETE"}).then(this._checkResponse)}toggleLike(e,t){let s;return s=t?"DELETE":"PUT",fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:s}).then(this._checkResponse)}}({baseUrl:"https://around.nomoreparties.co/v1/cohort-3-en",headers:{authorization:"a987f557-c5fc-4df9-a055-4063817e4bf0","Content-Type":"application/json"}});let c;Promise.all([l.getInitialCards(),l.getUserInfo()]).then((e=>{let[t,s]=e;var n;c=s._id,_.renderer(t),n=s,u.setUserInfo(n.name,n.about),u.setUserImage(n.avatar)})).catch((e=>console.log(e)));const h=e=>{const t=(e=>{const t=new n({data:e,handleCardClick:()=>p.open(e),handleDeleteCard:e=>{d.open(),d.setAction((()=>{d.handleLoading(!0,"Deleting..."),l.deleteCard(e).then((()=>{t.deleteCard(),d.close()})).catch((e=>console.log("error",e))).finally((()=>d.handleLoading(!1)))}))},handleCardlike:e=>{const s=t.isLiked();l.toggleLike(e,s).then((e=>{t.updateLikes(e.likes)})).catch((e=>console.log(e)))}},"#place-template",c);return t.generateCard()})(e);_.addItem(t)},u=new class{constructor(e){let{nameSelector:t,jobSelector:s,imageSelector:n}=e;this._userName=document.querySelector(t),this._userJob=document.querySelector(s),this._userImage=document.querySelector(n)}getUserInfo(){return{name:this._userName.textContent,job:this._userJob.textContent}}setUserInfo(e,t){this._userName.textContent=e,this._userJob.textContent=t}setUserImage(e){this._userImage.src=e}setImageVisible(){this._userImage.style.visibility="visible"}}({nameSelector:".profile__name",jobSelector:".profile__title",imageSelector:".profile__image"}),_=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._container=document.querySelector(t)}renderer(e){e.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({renderer:h},".places__list"),d=new class extends o{setAction(e){this._handleSubmit=e}setEventListeners(){this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit()})),super.setEventListeners()}}(".delete-popup"),p=new class extends o{constructor(e){super(e),this._popupImage=this._popupElement.querySelector(".popup__image")}open(e){const t=this._popupElement.querySelector(".popup__caption");this._popupImage.src=e.link,this._popupImage.alt="Photo of ".concat(e.name),t.textContent=e.name,super.open()}}(".image-popup"),m=new a(".avatar-popup",(e=>{m.handleLoading(!0),l.setUserAvatar(e.avatar).then((()=>{u.setUserImage(e.avatar),m.close()})).catch((e=>console.log(e))).finally((()=>m.handleLoading(!1)))})),v=new a(".add-popup",(e=>{v.handleLoading(!0,"Creating..."),l.createCard(e).then((e=>{h(e),v.close()})).catch((e=>console.log(e))).finally((()=>v.handleLoading(!1)))})),b=new a(".edit-popup",(e=>{b.handleLoading(!0),l.setUserInfo(e.name,e.job).then((()=>{u.setUserInfo(e.name,e.job),b.close()})).catch((e=>console.log(e))).finally((()=>b.handleLoading(!1)))})),g={};var f;f={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input_error_visible"},Array.from(document.querySelectorAll(f.formSelector)).forEach((e=>{const t=new i(f,e),s=e.getAttribute("name");g[s]=t,t.enableValidation()})),b.setEventListeners(),v.setEventListeners(),d.setEventListeners(),m.setEventListeners(),e.addEventListener("click",(()=>{g["edit-form"].resetValidation(),b.open(),b.setInputValues(u.getUserInfo())})),t.addEventListener("click",(()=>{g["add-form"].resetValidation(),v.open()})),s.addEventListener("click",(()=>{g["edit-avatar-form"].resetValidation(),m.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ckksRUFBZTJDLGlCQUFpQixTQUFTLEtBQ3ZDa0osRUFBZSxZQUFZcEcsa0JBQzNCa0csRUFBU3hGLFVBR1hsRyxFQUFPMEMsaUJBQWlCLFNBQVMsS0FDL0JrSixFQUFnQixvQkFBb0JwRyxrQkFDcENpRyxFQUFZdkYsVSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZS9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8tLS0tLS0tLS0tLS0tLS0tQ29uc3RhbnRzLS0tLS0tLS0tLS0tLS0tLVxyXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJBbnRlbG9wZSBDYW55b25cIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MjcyODU0ODktZWZhOGY0ZWE4YjBjP2l4bGliPXJiLTEuMi4xJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03MzUmcT04MFwiXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlNhbHQgQ3JlZWsgRmFsbHNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE0OTQ0NzIxNTU2NTYtZjM0ZTgxYjE3ZGRjP2l4bGliPXJiLTEuMi4xJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz02ODgmcT04MFwiXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlRydWNrZWVcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MTY2ODMxNzkyODItYjdmNjAzYWI2ZWJhP2l4bGliPXJiLTEuMi4xJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03NjQmcT04MFwiXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgUG93ZWxsXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTE2NTU3MTM5NTEwLTEzNDUwZjdkMzEyND9peGxpYj1yYi0xLjIuMSZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9Njg3JnE9ODBcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJHcmFuZCBDYW55b24gVmlsbGFnZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTQ4MjcwOTc0NjA0MS0xYWRjNWE4YWVmMDA/aXhsaWI9cmItMS4yLjEmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTExNzAmcT04MFwiXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIk1pYW1pIEJlYWNoXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjA1NzIzNTE3NTAzLTNjYWRiNTgxOGEwYz9peGxpYj1yYi0xLjIuMSZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTE3MCZxPTgwXCJcclxuICB9XHJcbl07XHJcbiAgXHJcbmNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLmZvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF9lcnJvcl92aXNpYmxlXCJcclxufTtcclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLU1vZGFscy0tLS0tLS0tLS0tLS0tLS1cclxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1wb3B1cFwiKTtcclxuY29uc3QgYWRkQ2FyZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtcG9wdXBcIik7XHJcbmNvbnN0IGF2YXRhckVkaXRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYXZhdGFyLXBvcHVwXCIpO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tQnV0dG9ucy0tLS0tLS0tLS0tLS0tLS1cclxuY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBhZGRQbGFjZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuY29uc3QgYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZS1jb250YWluZXJcIik7XHJcblxyXG5leHBvcnQge1xyXG4gIGluaXRpYWxDYXJkcywgdmFsaWRhdGlvblNldHRpbmdzLCBlZGl0UHJvZmlsZVBvcHVwLCBhZGRDYXJkUG9wdXAsXHJcbiAgZWRpdFByb2ZpbGVCdXR0b24sIGFkZFBsYWNlQnV0dG9uLCBhdmF0YXIsIGF2YXRhckVkaXRQb3B1cFxyXG59OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3Ioe2RhdGEsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlRGVsZXRlQ2FyZCwgaGFuZGxlQ2FyZGxpa2V9LCB0ZW1wbGF0ZVNlbGVjdG9yLCB1c2VySWQpIHtcclxuICAgICAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICAgICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQgPSBoYW5kbGVEZWxldGVDYXJkO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRsaWtlID0gaGFuZGxlQ2FyZGxpa2U7XHJcbiAgICAgICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcclxuICAgICAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XHJcblxyXG4gICAgICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgICAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKVxyXG4gICAgICAgICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKCcucGxhY2UnKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgICAgICB0aGlzLl9wbGFjZUltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlX19pbWFnZVwiKTtcclxuICAgICAgICBjb25zdCBwbGFjZVRpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlX190aXRsZVwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbGlrZUNvdW50ZXIgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VfX2xpa2VzLWNvdW50XCIpXHJcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGFjZV9fbGlrZS1idXR0b25cIik7XHJcblxyXG4gICAgICAgIHRoaXMuX3BsYWNlSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgICAgICB0aGlzLl9wbGFjZUltYWdlLmFsdCA9IGBQaG90byBvZiAke3RoaXMuX25hbWV9YDtcclxuICAgICAgICBwbGFjZVRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VfX2xpa2VzLWNvdW50XCIpLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKHRoaXMuX3VzZXJJZCAhPT0gdGhpcy5fb3duZXJJZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VfX2RlbGV0ZV9idXR0b25cIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnVwZGF0ZUxpa2VzKHRoaXMuX2xpa2VzKTtcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGFjZV9fbGlrZS1idXR0b25cIilcclxuICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVDYXJkbGlrZSh0aGlzLl9pZCkpO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGFjZV9fZGVsZXRlX2J1dHRvblwiKVxyXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQodGhpcy5faWQpKTtcclxuICAgICAgICB0aGlzLl9wbGFjZUltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlQ2FyZCA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUxpa2VzKG5ld0xpa2VzKSB7XHJcbiAgICAgICAgdGhpcy5fbGlrZXMgPSBuZXdMaWtlcztcclxuICAgICAgICB0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICAgICAgICBpZih0aGlzLmlzTGlrZWQoKSkgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwicGxhY2VfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgICAgICBlbHNlIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcInBsYWNlX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgaXNMaWtlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbGlrZXMuc29tZSgocGVyc29uKSA9PiBwZXJzb24uX2lkID09PSB0aGlzLl91c2VySWQpO1xyXG4gICAgfVxyXG4gICAgXHJcbn0iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybVRvQ2hlY2spIHtcclxuICAgICAgICB0aGlzLl9mb3JtID0gZm9ybVRvQ2hlY2s7XHJcbiAgICAgICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgICAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0c0xpc3QuZXZlcnkoKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgX3RvZ2dsZUJ1dHRvbigpIHtcclxuICAgICAgICBpZih0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9lbmFibGVCdXR0b24oKTsgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfZW5hYmxlQnV0dG9uKCkge1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgICAgICB0aGlzLl9idXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRzTGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcclxuICAgICAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvbigpO1xyXG5cclxuICAgICAgICB0aGlzLl9pbnB1dHNMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IGV2dC5wcmV2ZW50RGVmYXVsdCgpKTtcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b24oKTtcclxuICAgICAgICB0aGlzLl9pbnB1dHNMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2J1dHRvblwiKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5fc3VibWl0QnV0dG9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9fYWN0aXZlXCIpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xpY2spO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfX2FjdGl2ZVwiKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlT3ZlcmxheUNsaWNrKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICAgICAgaWYoZXZ0LmtleSA9PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2hhbmRsZU92ZXJsYXlDbGljayA9IChldnQpID0+IHtcclxuICAgICAgICBpZihldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCkge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUxvYWRpbmcoaXNMb2FkaW5nLCBsb2FkaW5nVGV4dCA9IFwiU2F2aW5nLi4uXCIpIHtcclxuICAgICAgICBpZiAodGhpcy5fc3VibWl0QnV0dG9uKSB7XHJcbiAgICAgICAgICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uVGV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9ICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCIpO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCkge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpXHJcbiAgICAgICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xyXG4gICAgICAgIHRoaXMuX2lucHV0c0xpc3QgPSBbLi4udGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIildO1xyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLl9pbnB1dHNMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdPSBpbnB1dC52YWx1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHNldElucHV0VmFsdWVzKGRhdGEpIHtcclxuICAgICAgICB0aGlzLl9pbnB1dHNMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgICB9XHJcbn0iLCJjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3Ioe2Jhc2VVcmwsIGhlYWRlcnN9KSB7XHJcbiAgICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgICAgaWYocmVzLm9rKSByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgZWxzZSByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1c1RleHQpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICAgIH1cclxuICBcclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbmZvKG5hbWUsIGFib3V0KSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICBhYm91dDogYWJvdXQsXHJcbiAgICAgICAgfSksXHJcbiAgICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckF2YXRhcihhdmF0YXIpIHtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIGF2YXRhcjogYXZhdGFyXHJcbiAgICAgICAgfSksXHJcbiAgICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlQ2FyZChkYXRhKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgIH1cclxuXHJcbiAgIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCJcclxuICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUxpa2UoY2FyZElkLCBpc0xpa2VkKSB7XHJcbiAgICBsZXQgbWV0aG9kO1xyXG4gICAgaXNMaWtlZCA/IChtZXRob2QgPSBcIkRFTEVURVwiKSA6IChtZXRob2QgPSBcIlBVVFwiKVxyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgbWV0aG9kOiBtZXRob2RcclxuICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcbn1cclxuICBcclxuICBleHBvcnQgY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTMtZW5cIixcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgYXV0aG9yaXphdGlvbjogXCJhOTg3ZjU1Ny1jNWZjLTRkZjktYTA1NS00MDYzODE3ZTRiZjBcIixcclxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgIH1cclxuICB9KTsiLCIvLy0tLS0tLS0tLS0tLS0tLS1JbXBvcnRzLS0tLS0tLS0tLS0tLS0tLVxyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgeyB2YWxpZGF0aW9uU2V0dGluZ3MsIGVkaXRQcm9maWxlQnV0dG9uLFxyXG4gICBhZGRQbGFjZUJ1dHRvbiwgYXZhdGFyIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhTdWJtaXQgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoU3VibWl0LmpzXCI7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS1GdW5jdGlvbnMtLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5sZXQgdXNlcklkO1xyXG5cclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRJbml0aWFsQ2FyZHMoKSwgYXBpLmdldFVzZXJJbmZvKCldKVxyXG4gIC50aGVuKChbY2FyZERhdGEsIHVzZXJEYXRhXSkgPT4ge1xyXG4gICAgdXNlcklkID0gdXNlckRhdGEuX2lkO1xyXG4gICAgcGxhY2VzU2VjdGlvbi5yZW5kZXJlcihjYXJkRGF0YSk7XHJcbiAgICBmaWxsUHJvZmlsZVNlY3Rpb24odXNlckRhdGEpO1xyXG4gIH0pLmNhdGNoKHJlcyA9PiBjb25zb2xlLmxvZyhyZXMpKTtcclxuXHJcbmNvbnN0IGdlbmVyYXRlQ2FyZCA9IChkYXRhKSA9PiB7XHJcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKHtcclxuICAgIGRhdGEsIFxyXG4gICAgaGFuZGxlQ2FyZENsaWNrOiAoKSA9PiBpbWFnZVBvcHVwLm9wZW4oZGF0YSksXHJcbiAgICBoYW5kbGVEZWxldGVDYXJkOiAoaWQpID0+IHtcclxuICAgICAgZGVsZXRlUG9wdXAub3BlbigpO1xyXG4gICAgICBkZWxldGVQb3B1cC5zZXRBY3Rpb24oKCkgPT4ge1xyXG4gICAgICAgIGRlbGV0ZVBvcHVwLmhhbmRsZUxvYWRpbmcodHJ1ZSwgXCJEZWxldGluZy4uLlwiKTtcclxuICAgICAgICBhcGkuZGVsZXRlQ2FyZChpZCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICBuZXdDYXJkLmRlbGV0ZUNhcmQoKTtcclxuICAgICAgICAgIGRlbGV0ZVBvcHVwLmNsb3NlKCk7XHJcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKFwiZXJyb3JcIiwgZXJyKSlcclxuICAgICAgICAgIC5maW5hbGx5KCgpID0+IGRlbGV0ZVBvcHVwLmhhbmRsZUxvYWRpbmcoZmFsc2UpKTtcclxuICAgICAgICBcclxuICAgICAgfSl9LFxyXG4gICAgaGFuZGxlQ2FyZGxpa2U6IChpZCkgPT4ge1xyXG4gICAgICBjb25zdCBsaWtlQWN0aXZlID0gbmV3Q2FyZC5pc0xpa2VkKCk7XHJcbiAgICAgIGlmKGxpa2VBY3RpdmUpIHtcclxuICAgICAgICBhcGkudG9nZ2xlTGlrZShpZCwgbGlrZUFjdGl2ZSkudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgbmV3Q2FyZC51cGRhdGVMaWtlcyhyZXMubGlrZXMpO1xyXG4gICAgICAgIH0pLmNhdGNoKHJlcyA9PiBjb25zb2xlLmxvZyhyZXMpKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhcGkudG9nZ2xlTGlrZShpZCwgbGlrZUFjdGl2ZSkudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgbmV3Q2FyZC51cGRhdGVMaWtlcyhyZXMubGlrZXMpO1xyXG4gICAgICAgIH0pLmNhdGNoKHJlcyA9PiBjb25zb2xlLmxvZyhyZXMpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sIFwiI3BsYWNlLXRlbXBsYXRlXCIsIHVzZXJJZCk7XHJcbiAgICBcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ld0NhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59O1xyXG5cclxuY29uc3QgcmVuZGVyQ2FyZCA9IChkYXRhKSA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IGdlbmVyYXRlQ2FyZChkYXRhKTtcclxuICBwbGFjZXNTZWN0aW9uLmFkZEl0ZW0oY2FyZCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbGxQcm9maWxlU2VjdGlvbihyZXMpIHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXMubmFtZSwgcmVzLmFib3V0KTtcclxuICB1c2VySW5mby5zZXRVc2VySW1hZ2UocmVzLmF2YXRhcik7XHJcbn1cclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLUNsYXNzZXMgaW5pdGlhbGl6YXRpb24tLS0tLS0tLS0tLS0tLS0tXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICBqb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICBpbWFnZVNlbGVjdG9yOiBcIi5wcm9maWxlX19pbWFnZVwiXHJcbn0pO1xyXG5cclxuY29uc3QgcGxhY2VzU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIHJlbmRlcmVyOiByZW5kZXJDYXJkXHJcbiAgfSxcclxuICBcIi5wbGFjZXNfX2xpc3RcIlxyXG4pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tUG9wdXBzLS0tLS0tLS0tLS0tLS0tLVxyXG5jb25zdCBkZWxldGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhTdWJtaXQoXCIuZGVsZXRlLXBvcHVwXCIpO1xyXG5cclxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5pbWFnZS1wb3B1cFwiKTtcclxuXHJcbmNvbnN0IGF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIuYXZhdGFyLXBvcHVwXCIsIChkYXRhKSA9PiB7XHJcbiAgYXZhdGFyUG9wdXAuaGFuZGxlTG9hZGluZyh0cnVlKVxyXG4gIGFwaS5zZXRVc2VyQXZhdGFyKGRhdGEuYXZhdGFyKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VySW1hZ2UoZGF0YS5hdmF0YXIpO1xyXG4gICAgICBhdmF0YXJQb3B1cC5jbG9zZSgpO1xyXG4gICAgfSkuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAuZmluYWxseSgoKSA9PiBhdmF0YXJQb3B1cC5oYW5kbGVMb2FkaW5nKGZhbHNlKSk7XHJcbn0pO1xyXG5cclxuY29uc3QgYWRkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5hZGQtcG9wdXBcIiwgKGRhdGEpID0+IHtcclxuICBhZGRQb3B1cC5oYW5kbGVMb2FkaW5nKHRydWUsIFwiQ3JlYXRpbmcuLi5cIik7XHJcbiAgYXBpLmNyZWF0ZUNhcmQoZGF0YSkudGhlbihyZXMgPT4ge1xyXG4gICAgcmVuZGVyQ2FyZChyZXMpO1xyXG4gICAgYWRkUG9wdXAuY2xvc2UoKTtcclxuICB9KS5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAuZmluYWxseSgoKSA9PiBhZGRQb3B1cC5oYW5kbGVMb2FkaW5nKGZhbHNlKSk7XHJcbn0pO1xyXG5cclxuY29uc3QgZWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIuZWRpdC1wb3B1cFwiLCAoZGF0YSkgPT4ge1xyXG4gIGVkaXRQb3B1cC5oYW5kbGVMb2FkaW5nKHRydWUpO1xyXG4gIGFwaS5zZXRVc2VySW5mbyhkYXRhLm5hbWUsIGRhdGEuam9iKVxyXG4gIC50aGVuKCgpID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEubmFtZSwgZGF0YS5qb2IpO1xyXG4gICAgZWRpdFBvcHVwLmNsb3NlKCk7XHJcbiAgfSkuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgLmZpbmFsbHkoKCkgPT4gZWRpdFBvcHVwLmhhbmRsZUxvYWRpbmcoZmFsc2UpKTtcclxufSk7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS1Gb3JtIFZhbGlkYXRvcnMtLS0tLS0tLS0tLS0tLS0tXHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge31cclxuXHJcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpXHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpO1xyXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcclxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5lbmFibGVWYWxpZGF0aW9uKHZhbGlkYXRpb25TZXR0aW5ncyk7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS1FdmVudCBsaXN0ZW5lcnMtLS0tLS0tLS0tLS0tLS0tXHJcbmVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5hZGRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5kZWxldGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5hdmF0YXJQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tRXZlbnQgaGFuZGxlcnMtLS0tLS0tLS0tLS0tLS0tXHJcbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJlZGl0LWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgZWRpdFBvcHVwLm9wZW4oKTtcclxuICBlZGl0UG9wdXAuc2V0SW5wdXRWYWx1ZXModXNlckluZm8uZ2V0VXNlckluZm8oKSk7XHJcbn0pO1xyXG5cclxuYWRkUGxhY2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBmb3JtVmFsaWRhdG9yc1tcImFkZC1mb3JtXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGFkZFBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5hdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBmb3JtVmFsaWRhdG9yc1sgXCJlZGl0LWF2YXRhci1mb3JtXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGF2YXRhclBvcHVwLm9wZW4oKTtcclxufSk7IiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yICh7bmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciwgaW1hZ2VTZWxlY3Rvcn0pIHtcclxuICAgICAgICB0aGlzLl91c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl91c2VySm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fdXNlckltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpbWFnZVNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgICAgICAgam9iOiB0aGlzLl91c2VySm9iLnRleHRDb250ZW50XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW5mbyhuYW1lLCBqb2IpIHtcclxuICAgICAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5fdXNlckpvYi50ZXh0Q29udGVudCA9IGpvYjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW1hZ2UoaW1hZ2UpIHtcclxuICAgICAgICB0aGlzLl91c2VySW1hZ2Uuc3JjID0gaW1hZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0SW1hZ2VWaXNpYmxlKCkge1xyXG4gICAgICAgIHRoaXMuX3VzZXJJbWFnZS5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7cmVuZGVyZXJ9LCBjbGFzc1NlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNsYXNzU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcmVyKGl0ZW1zKSB7XHJcbiAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdFN1Ym1pdCBleHRlbmRzIFBvcHVwe1xyXG4gICAgc2V0QWN0aW9uKGFjdGlvbikge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGFjdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3RvcilcclxuICAgICAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oZGF0YSkge1xyXG4gICAgICAgIGNvbnN0IGltYWdlQ2FwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jYXB0aW9uXCIpO1xyXG5cclxuICAgICAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGRhdGEubGluaztcclxuICAgICAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9ICBgUGhvdG8gb2YgJHtkYXRhLm5hbWV9YDtcclxuICAgICAgICBpbWFnZUNhcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgfVxyXG59Il0sIm5hbWVzIjpbImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImVkaXRQcm9maWxlQnV0dG9uIiwiYWRkUGxhY2VCdXR0b24iLCJhdmF0YXIiLCJDYXJkIiwiY29uc3RydWN0b3IiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwidXNlcklkIiwiZGF0YSIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZUNhcmQiLCJoYW5kbGVDYXJkbGlrZSIsInRoaXMiLCJfZWxlbWVudCIsInJlbW92ZSIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX2hhbmRsZUNhcmRsaWtlIiwiX2lkIiwiX2xpa2VzIiwibGlrZXMiLCJfdXNlcklkIiwiX293bmVySWQiLCJvd25lciIsIl9nZXRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZW5lcmF0ZUNhcmQiLCJfcGxhY2VJbWFnZSIsInBsYWNlVGl0bGUiLCJfbGlrZUNvdW50ZXIiLCJfbGlrZUJ1dHRvbiIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwibGVuZ3RoIiwic3R5bGUiLCJkaXNwbGF5IiwidXBkYXRlTGlrZXMiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwibmV3TGlrZXMiLCJpc0xpa2VkIiwiY2xhc3NMaXN0IiwiYWRkIiwic29tZSIsInBlcnNvbiIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1Ub0NoZWNrIiwiX2Zvcm0iLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0c0xpc3QiLCJldmVyeSIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJfdG9nZ2xlQnV0dG9uIiwiX2VuYWJsZUJ1dHRvbiIsIl9kaXNhYmxlQnV0dG9uIiwiX2J1dHRvbiIsImRpc2FibGVkIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsImVycm9yRWxlbWVudCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImlucHV0IiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwicmVzZXRWYWxpZGF0aW9uIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwia2V5IiwiY2xvc2UiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiX3BvcHVwRWxlbWVudCIsIl9zdWJtaXRCdXR0b24iLCJfc3VibWl0QnV0dG9uVGV4dCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJfaGFuZGxlT3ZlcmxheUNsaWNrIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZUxvYWRpbmciLCJpc0xvYWRpbmciLCJsb2FkaW5nVGV4dCIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZVN1Ym1pdCIsIl9mb3JtRWxlbWVudCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsImUiLCJyZXNldCIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1c1RleHQiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsInRoZW4iLCJnZXRVc2VySW5mbyIsInNldFVzZXJJbmZvIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInNldFVzZXJBdmF0YXIiLCJjcmVhdGVDYXJkIiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsInRvZ2dsZUxpa2UiLCJhdXRob3JpemF0aW9uIiwiYWxsIiwiY2FyZERhdGEiLCJ1c2VyRGF0YSIsInBsYWNlc1NlY3Rpb24iLCJyZW5kZXJlciIsInVzZXJJbmZvIiwic2V0VXNlckltYWdlIiwiY2F0Y2giLCJjb25zb2xlIiwibG9nIiwicmVuZGVyQ2FyZCIsImNhcmQiLCJuZXdDYXJkIiwiaW1hZ2VQb3B1cCIsImRlbGV0ZVBvcHVwIiwic2V0QWN0aW9uIiwiZXJyIiwiZmluYWxseSIsImxpa2VBY3RpdmUiLCJhZGRJdGVtIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJpbWFnZVNlbGVjdG9yIiwiX3VzZXJOYW1lIiwiX3VzZXJKb2IiLCJfdXNlckltYWdlIiwiam9iIiwiaW1hZ2UiLCJzZXRJbWFnZVZpc2libGUiLCJ2aXNpYmlsaXR5IiwiY2xhc3NTZWxlY3RvciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtcyIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImFjdGlvbiIsIl9wb3B1cEltYWdlIiwiaW1hZ2VDYXB0aW9uIiwiYXZhdGFyUG9wdXAiLCJhZGRQb3B1cCIsImVkaXRQb3B1cCIsImZvcm1WYWxpZGF0b3JzIiwiY29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiZm9ybUVsZW1lbnQiLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSJdLCJzb3VyY2VSb290IjoiIn0=